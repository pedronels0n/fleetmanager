{% extends "controle/base.html" %}
{% load static %}

{% block title %}Detalhes da Multa{% endblock %}

{% block content %}
<div class="container py-4">
    <h3 class="mb-3">Detalhes da Multa</h3>

    <div class="card shadow-sm">
        <div class="card-header bg-dark text-white">
            Memorando nÂº {{ multa.numero_memorando|default:"â€”" }}
        </div>
        <div class="card-body">

            <dl class="row">
                <dt class="col-sm-4">VeÃ­culo</dt>
                <dd class="col-sm-8">{{ multa.veiculo.placa }} - {{ multa.veiculo.marca }} {{ multa.veiculo.modelo }}</dd>

                <dt class="col-sm-4">Motorista</dt>
                <dd class="col-sm-8">{{ multa.motorista|default:"â€”" }}</dd>

                <dt class="col-sm-4">Setor</dt>
                <dd class="col-sm-8">{{ multa.setor|default:"â€”" }}</dd>

                <dt class="col-sm-4">InfraÃ§Ã£o</dt>
                <dd class="col-sm-8">{{ multa.infracao.descricao }} (R$ {{ multa.infracao.valor }})</dd>

                <dt class="col-sm-4">Data/Hora da InfraÃ§Ã£o</dt>
                <dd class="col-sm-8">{{ multa.data_hora_infracao|date:"d/m/Y H:i" }}</dd>

                <dt class="col-sm-4">Local</dt>
                <dd class="col-sm-8">{{ multa.local }}</dd>

                <dt class="col-sm-4">Ã“rgÃ£o Autuador</dt>
                <dd class="col-sm-8">{{ multa.orgao_autuador }}</dd>

                <dt class="col-sm-4">Prazo de Pagamento</dt>
                <dd class="col-sm-8">{{ multa.prazo_pagamento|date:"d/m/Y" }}</dd>

                <dt class="col-sm-4">Status da Multa</dt>
                <dd class="col-sm-8">
                    {% if multa.status_multa == "recebido" %}
                        <span class="badge bg-success">Recebido</span>
                    {% else %}
                        <span class="badge bg-secondary">Enviado</span>
                    {% endif %}
                </dd>

                <dt class="col-sm-4">Status de Pagamento</dt>
                <dd class="col-sm-8">
                    {% if multa.status_pagamento == "pago" %}
                        <span class="badge bg-success">Pago</span>
                    {% else %}
                        <span class="badge bg-warning text-dark">Pendente</span>
                    {% endif %}
                </dd>

                <dt class="col-sm-4">Conta de Pagamento</dt>
                <dd class="col-sm-8">{{ multa.conta_pagamento|default:"â€”" }}</dd>

                <dt class="col-sm-4">Documento Recebido</dt>
                <dd class="col-sm-8">
                    {% if multa.documento_recebido %}
                        ðŸ“„ <a href="{{ multa.documento_recebido.url }}" target="_blank">Ver documento</a>
                    {% else %}
                        â€”
                    {% endif %}
                </dd>

                <dt class="col-sm-4">Comprovante de Pagamento</dt>
                <dd class="col-sm-8">
                    {% if multa.comprovante_pagamento %}
                        ðŸ“„ <a href="{{ multa.comprovante_pagamento.url }}" target="_blank">Ver comprovante</a>
                    {% else %}
                        â€”
                    {% endif %}
                </dd>

                <dt class="col-sm-4">NotificaÃ§Ã£o da InfraÃ§Ã£o</dt>
                <dd class="col-sm-8">
                    {% if multa.notificacao_infracao %}
                        ðŸ“„ <a href="{{ multa.notificacao_infracao.url }}" target="_blank">Ver notificaÃ§Ã£o</a>
                    {% else %}
                        â€”
                    {% endif %}
                </dd>

                <dt class="col-sm-4">Memorando</dt>
                <dd class="col-sm-8">
                    {% if multa.memorando %}
                        ðŸ“„ <a href="{{ multa.memorando.url }}" target="_blank">Ver memorando</a>
                    {% else %}
                        â€”
                    {% endif %}
                </dd>

                <dt class="col-sm-4">Registrado em</dt>
                <dd class="col-sm-8">{{ multa.data_registro|date:"d/m/Y H:i" }}</dd>
            </dl>
        </div>
    </div>

    <div class="mt-3">
        <a href="{% url 'editar_multa' multa.id %}" class="btn btn-outline-primary me-2">
            <i class="bi bi-pencil"></i> Receber
        </a>
        <a href="{% url 'pagar_multa' multa.id %}" class="btn btn-outline-success me-2">
            <i class="bi bi-cash-coin"></i> Pagar
        </a>
        <a href="{% url 'listar_multas' %}" class="btn btn-secondary">Voltar</a>
    </div>
</div>
{% endblock %}
